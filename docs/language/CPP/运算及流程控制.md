# 运算及流程控制

## 表达式

### 算术运算与算术表达式

#### 基本算术运算

​    `+` `-` `*` `/` `%`

说明

- 两个整型相除除不尽，一般采用向零取整

```cpp
int a=5,b=2;
double c = a/b;
```

此时 c 等于 2，因为整型 a/b 的值为 2

- 此外，'**Ｃ++对运算时所有的float型数据按照double型处理**'



#### 不同数值类型的混合运算（隐式类型转换）

不同类型的数据先转换为同一类型，再进行运算

``` mermaid
graph LR
float-->double-->long-->unsigned-->int
char,short-->int
```



float   ->  double

​					long

​					unsigned

char,short -> int

> 向右的箭头是必定的转换
>
> 由下往上优先级越来越高
>
> 箭头仅表示方向，不表示过程（转换一步到位）
>
> - 总之从范围小的转换到范围大的

#### 自增自减运算符

使变量的值 +1 或者 -1

`++i`：先` i = i + 1`，在使用 `i`

`i++`：先使用 `i` ，在执行` i = i + 1`



::: tip ++i和i++的区别

?????

:::



#### 强制类型转换运算符

​    一般不同类型的数据可以自动转换，有时需要手动强制转换

```cpp
(typename)表达式
typename(表达式)
```

​    例：

```cpp
(double)a
(int)(x + y)
(float)(5%4)
int(x + y) 注意与 (int)x + y 不同
int(x)
```

::: tip

强制类型转换得到的是一个中间值，一般作为输出或者赋给另一个变量

原变量的类型不变

:::

### 赋值运算与赋值表达式

#### 赋值运算符

`=`

从右向左

#### 复制过程中的类型转换

如果赋值运算符两侧的类型不一致，但是都是数值型或者字符型，在赋值时自动进行类型转换

1. 浮点型赋给整型，舍弃小数部分

```cpp
int 1; i = 3.14;cout << i <<endl;
```

输出 i 为 3（整型）

2. 整型赋给浮点型

数值不变，但是在内存中已经变成指数形式（变为浮点型）

3. 将 `double `赋给 `float`

注意不要溢出

4. 将字符型赋给整型

赋给字符的 ASCII 码

5. 将 `int`，`short `或 `long `赋给 `char`

仅取低 8 位（发生截断）

6. 将有符号 `signed `赋给长度相同的 `unsigned`

将储存单位内容原样照搬

总结：**不同类型的整型数据直接的赋值就是按照存储单元中的存储形式直接传送**

#### 复合赋值运算符

在赋值符 = 之前加上其他运算符，可以构成复合运算符

```cpp
a += 3    	a = a+3
a *= b + 3	a = a*(b + 3) //赋值运算符优先级较低且为右结合性
a %= 3     	a = a % 3
```

凡是双目运算符可以与赋值符一起组合位复合运算符

#### 赋值表达式

1、形式

`变量 = 表达式`

2、求解过程

先求右值`(right valve，rvalve)`再将右值赋给左值

- 左值：
    - 赋值运算符左侧的标识符
    - 不是任何对象都可作为右值

- 右值：
    - 左值都可以作为右值 a = b
    - 表达式可以为赋值表达式 a = b = 5

3、结果

- 赋值表达式整体有一个值作为结果
- `a=3*5`的值为 15，执行表达式后 a 的值也为 15

4、使用

Ｃ++赋值表达式式可以以表达式的形式出现在非赋值语句中，例

```cpp
cout<<(a = b);  //赋值输出双功能
```



### 逗号运算符和逗号表达式

  又称为**顺序求值运算符**

1. 形式：

```cpp
表达式1, 表达式2, …………, 表达式n;
```

2. 求解

先求解表达式1，再求表达式2（从左到右）

整个逗号表达式的值是表达式2的值（后面那个表达式的值）

例，3+5,6+8   "3+5,6+8"的值为 14

3. 优先级

逗号运算符的优先级最低，比赋值 = 还低，例

```cpp
a= 3*5,a*4;
```

求解：

先对a赋值 a = 15

再求 a*4 = 60，即整个表达式的值为 60

4. 运用

- 逗号表达式一般是把若干个表达式串联起来
    - 只是为了在一个表达式中对若干个表达式进行计算得到值，而并非为了整个逗号表达式的值

- 常用于循环语句



### 条件运算符与条件表达式

1. 条件运算符 `? :`

2. 条件表达式

```cpp
表达式1 ? 表达式2:表达式3
```

求解：

先求解表达式1

- 如果表达式1的值 非0（真）
  - 则整个表达式的值为 表达式2

- 如果表达式1的值 `0`（假）
  - 则整个表达式的值为 表达式3

3. 举例

```cpp
max = (a>b)?a:b; //将a，b中较大的值赋给 max
```



### 关系运算与关系表达式

1. 关系运算：

比较运算，将两个数据进行比较

还可以对字符表达式比较

2. 关系表达式：

表达式 关系运算符 表达式

3. 关系运算符

`<`    优先级相同，比下面两个更高

`<=`

`>`



`>=`

`== `     (等于，不等于的优先级低于大于小于)

`!=` 不等于

4. 优先级与结合性

​    结合性：

​      从左向右，例

​      a>b>c 等价于 (a>b)>c 

​    上面的优先级更高：

​      算术运算符

​      关系运算符

​      赋值运算符

​    例：

```cpp
c > a + b	c > (a + b)
a > b == c  (a > b) == c
a == b < c  a == (b < c)
a = b > c   a = (a>c)
```



5. 关系表达式的值

关系表达式的值是'逻辑值，即真或者假'

### 逻辑运算与逻辑表达式

1. **逻辑常量与逻辑变量**

Ｃ语言中没有逻辑型数据，真或假（关系表达式）对值使用 1 和 0 代表的

C++中增加了逻辑型数据

- 逻辑常量
    - false; 假，编辑器将 false 处理为 0
    - true;  真，将 true 处理为 1

> 占 1 字节

- 逻辑变量
    - 类型表示符 bool
    - 值只能为 true 或者 false，例

```cpp
bool A;
A = true;
```

- 布尔变量  布尔常量
    - 逻辑型又被称为布尔型

```cpp
cout<<boolalpha<<endl;//按照bool类型访问
```

- 布尔代数
    - 可以与数值型数据混合进行算术运算
    - **若将非零整数赋给布尔型数据，则按“真”处理，值为 1** 

2. **逻辑运算符**

| `&&`       | `\|\|`     | `!`        |
| :--------- | :--------- | ---------- |
| 与         | 或         | 非         |
| 双目运算符 | 双目运算符 | 单目运算符 |

优先级

-  !(非) 大于 &&（与）大于 ||(或)

-  !(非)

    算术运算符

    关系运算符

    逻辑运算符

    赋值运算符



3. **逻辑表达式**

形式

`表达式 逻辑运算符 表达式`

2、说明

得到一个逻辑量：真/假

非`0` ——〉 真 ——〉值为`1`

`0` ——〉假

**逻辑运算符两侧可以为任何数值型数据**

​      

## 运算符

1、算术运算符

| `+`  | `-`  | `*`  | `/`  | `%`      | `++` | `--` |
| ---- | ---- | ---- | ---- | -------- | ---- | ---- |
| 加   | 减   | 乘   | 除   | 整数求余 | 自加 | 自减 |



2、关系运算符

`>`       `<`      ` ==`      `>= `     `<=`      `!=`

3、逻辑运算符

`&&`      `||`      `!`

4、位运算符

| `<<`     | `>>`     | `&`    | `\|`   | `^`      | `~`      |
| -------- | -------- | ------ | ------ | -------- | -------- |
| 按位左移 | 按位右移 | 按位与 | 按位或 | 按位异或 | 按位取反 |



目数：双目

结合性：从左往右

例 `2 << 3` =16 ：将 2（10）的二进制数全部向左移动 16（10000）,如果溢出则舍去高位



5、赋值运算符

`=` `-=` `+=` `*=` `/=`………………

6、条件运算符

`? :`



7、逗号运算符

`,`



8、指针运算符

`*`

9、引用运算符和地址运算符

`&`



10、求字节数运算符

`sizeof(type)`

11、强制类型转换运算符

`(typename) `或者 `typename()`

12、成员运算符

`.`

13、指向成员的运算符

` ->`

14、下标运算符

`[]`

15、其他（如函数调用运算符() ）

`:: `作用域运算符：标识某个成员属于哪个类

### 运算符的优先级、结合性与目数

#### 优先级

在求解表达式时，按运算符的优先级依次执行

同一优先级则按照结合方向

大致优先级：

1. 初等运算符 `::` `->` `.`` ()` `[]`
2. 单目运算符
    1. 自增自减（后置）
    2. 自增自减（前置）
    3. 逻辑非 !
    4. 正负
    5. 算术（先乘除，后加减）
3. 关系
4. 条件
5. 赋值
6. 逗号

#### 目数
> 运算对象的个数

- 单目运算符

`-``+`（正负）` ++` `--` `sizeof(type)` …………
只在运算符一侧出现一个运算对象

- 双目运算符

`-` `+`（加减）…………
两侧各有一个运算对象

- 三目运算符

条件运算符

```cpp
x?a:b
```

唯一一个三目运算符

#### 结合性

结合方向

- 从左向右
    - 大部分运算符都是从左向右

- 从右向左
    - 大部分单目运算符是从右向左
    - 赋值运算符是从右向左（先算等式右边的）



## 语句

Ｃ++语句

Ｃ++程序中最小的独立单位，一般以分号结尾，复合语句以 "}" 结尾

分类

- 声明语句

```cpp
int a,b;
```

​      对变量和其他对象的定义（Ｃ语言中不是语句）

​      位置可以在任何地方

​      作用范围从声明开始到本函数或本块的结尾

- 执行语句

  1. 控制语句

     完成一定的控制功能

  2. 函数和流对象调用语句

     函数调用

     流调用

     表达式语句

     - 表达式 + 分号

  3. 空语句

     只有一个分号，什么也不做

     常作为转向点，循环语句中的循环体：循环体是空语句，表示循环体什么也不做
  
     ```cpp
     int n = 0;
     while (n++<=2);
     cout << n; //输出为 4
     ```
  
  4. 复合语句
  
  ​       用 {} 把一些语句扩起来，成为复合语句



### 选择控制语句

1. if 语句

根据表达式值的真或假，执行给出的操作

​    1、形式

```cpp
if (表达式) 语句
```

​      例：

```cpp
if (x > y) cout <<x<<endl;
```

```cpp
if (表达式) 语句1
else 语句2
```

​      例：

```cpp
if (x>y) cout<<x<<endl;
else cout<<y;
```

```cpp
if(表达式) 语句
else if(表达式) 语句
else if(表达式) 语句
………………
else 语句
```



::: warning 注意

- 执行 if 时先对（）中的表达式求解，按照 非0（真） 和 0（假） 处理
  - 例：if(2)cout<<ok;

- 分号⚠️
  - 语句以";"或者"}"结尾

- 在复合语句中定义的变量为'**局部变量**'，只在该语句中有效

:::

2. if 语句嵌套

​      例：

```cpp
if ()
    if () 
    else 
else 
    if ()
    else
```

注意 `if `和 `else `的配对关系：

- `else `总是和它上面最近的，且未配对的 `if `配对
- 如果 `if `和 `else `的数量不一样，可以用花括号来确定关系

​        

### 多分支选择结构与 switch 语句

​    1、形式

```cpp
switch (表达式) {
    case condition: 语句1;
    case condition: 语句2;
        ……………
    case condition: 语句n;
    default:语句 n+1     //default 可以不写，可以有一个，无论在哪都是最后执行
}
```

​    2、说明

​      1、switch 后面的表达式只能是整型或者字符类型（枚举类型）

​      2、当 switch 表达式的值与某一个 case 子句中的常量表达式值相匹配时，就执行此 case 子句

​        如果都不能匹配，就执行 default 子句中的内嵌语句;

​      3、每一个 case 表达式的值必须互不相同，否则会出现矛盾;

​      4、各个 case 和 default: 的出现次序不影响执行结果;

​      5、执行完一个 case 子句之后，流程控制转移到下一个 case 子句继续执行

​        并不是在 case 处进行条件判断

​          根据 switch 表达式的值，找到匹配的case之后，就从 case 开始执行下去，不再进行判断

​        为了跳出结构，中止语句，可以在每一个 case 之后加上 break; 例：

```cpp
switch (grade) {
	case 'A': cout<<"85~95\n";break;
  	case 'B': cout<<"70~84\n";break;
  	………………
  	default:cout<<"error\n";break;  //最后一个子句（这里是default）可以不加
}
```

​      6、多个 case 执行同一个语句

```cpp
switch (grad) {
	case 'A': 
 	case 'B': 
  	case 'c': cout<<">60\n";break;
}
```

​          当grade的值为 A，B，Ｃ的时候执行同一个语句;

​          

### 循环结构和循环语句

  1、用while语句构成循环

​    1、形式

```cpp
while (表达式) {
    语句;
}
```

​    2、作用

当指定的条件为真（表达式为非0）时，执行while语句中的内嵌语句（循环体）

​    3、特点

先判断表达式，再执行语句

​      



::: warning `goto`和`break`



:::